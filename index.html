<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Templia | Coming Soon</title>

  <link rel="icon" type="image/png" href="Templia Favicon.png" />

  <style>
    :root {
      --bg: #1b1a1a;
      --text: #e4e4e4;
      --muted: #bfbfbf;
      --accent: #a92aeb;
      --accent-2: #4d33bd;
      --ok: #5bd68a;
      --err: #ff6b6b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      background-color: var(--bg);
      font-family: 'TT Drugs', sans-serif;
      color: var(--text);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    /* Animated gradient background */
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(135deg, #0606cc, #3650b9, #a92aeb, #4d33bd);
      background-size: 400% 400%;
      animation: moveGradient 15s ease infinite;
      opacity: 0.7;
      z-index: 0;
    }
    @keyframes moveGradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Content */
    .logo img {
      width: 500px;
      max-width: 95%;
      display: block;
      margin: 0 auto 1rem auto;
      -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 85%, rgba(0,0,0,0) 100%);
      -webkit-mask-repeat: no-repeat;
      -webkit-mask-size: cover;
      mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 85%, rgba(0,0,0,0) 100%);
      mask-repeat: no-repeat;
      mask-size: cover;
      position: relative;
      z-index: 1;
    }
    .subtitle { font-size: 1.3rem; margin: 0.5rem 0; z-index: 1; }
    .countdown { font-size: 2rem; letter-spacing: 1.5px; margin: 1rem 0; z-index: 1; }
    .verse {
      font-size: 1rem; max-width: 600px; margin-top: 5rem; padding: 0 1rem;
      line-height: 1.6; font-style: italic; z-index: 1;
    }

    /* --- Email Signup Section --- */
    .signup {
      width: 100%;
      max-width: 560px;
      margin-top: 1.25rem;
      z-index: 2;
      position: relative;
    }
    .signup h3 {
      margin: 0 0 0.5rem 0;
      font-weight: 600;
      letter-spacing: 0.4px;
    }
    .signup p.hint {
      margin: 0 0 1rem 0;
      font-size: 0.95rem;
      color: var(--muted);
    }
    .signup form {
      display: flex;
      gap: 0.5rem;
      width: 100%;
      flex-wrap: wrap;
      justify-content: center;
    }
    .signup input[type="email"] {
      flex: 1 1 320px;
      min-width: 240px;
      padding: 0.85rem 1rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.15);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      outline: none;
      transition: border-color 0.2s ease;
    }
    .signup input[type="email"]::placeholder { color: #cfcfcf; }
    .signup input[type="email"]:focus { border-color: var(--accent); }

    .signup button[type="submit"] {
      padding: 0.85rem 1.25rem;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.15);
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.06s ease, opacity 0.2s ease;
    }
    .signup button[type="submit"]:disabled {
      opacity: 0.65;
      cursor: not-allowed;
    }
    .signup .consent {
      display: flex; align-items: center; gap: 0.5rem;
      justify-content: center;
      font-size: 0.9rem;
      margin-top: 0.75rem;
      color: var(--muted);
    }
    .signup .consent input { transform: translateY(1px); }

    .msg {
      margin-top: 0.75rem;
      font-size: 0.95rem;
      line-height: 1.4;
    }
    .msg.ok { color: var(--ok); }
    .msg.err { color: var(--err); }

    /* honeypot (hidden field against bots) */
    .hiddenpot { position: absolute; left: -9999px; top: -9999px; height: 0; width: 0; overflow: hidden; }

    /* ---------- CUTE SUCCESS ANIMATION ---------- */
    .hidden { display: none !important; }

    #signup-success {
      display: none;
      width: 100%;
      max-width: 560px;
      margin-top: 1.25rem;
    }
    #signup-success.show { display: block; }

    .success-card {
      position: relative;
      padding: 24px 20px 28px;
      border-radius: 20px;
      background: rgba(0,0,0,0.25);
      border: 1px solid rgba(255,255,255,0.12);
      overflow: hidden;
    }

    /* Burst ring */
    .burst {
      position: absolute;
      inset: -10px;
      background: radial-gradient(circle at 50% 40%, rgba(169,42,235,0.25), rgba(77,51,189,0.15) 40%, transparent 70%);
      filter: blur(10px);
      animation: pulse 1.8s ease-out 1 forwards;
      pointer-events: none;
    }
    @keyframes pulse {
      0% { opacity: 0; transform: scale(0.8); }
      30% { opacity: 1; transform: scale(1.02); }
      100% { opacity: 0.7; transform: scale(1); }
    }

    /* Check seal */
    .seal {
      width: 84px;
      height: 84px;
      margin: 0 auto 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--ok), #38c172);
      display: grid;
      place-items: center;
      box-shadow: 0 10px 25px rgba(91,214,138,0.35);
      animation: pop 420ms cubic-bezier(.2,1.4,.3,1);
    }
    @keyframes pop {
      0% { transform: scale(0); opacity: 0; }
      60% { transform: scale(1.15); opacity: 1; }
      100% { transform: scale(1); }
    }

    .checkmark {
      width: 38px; height: 38px;
      stroke: white; stroke-width: 5; fill: none;
      stroke-linecap: round; stroke-linejoin: round;
      stroke-dasharray: 60; stroke-dashoffset: 60;
      animation: draw 700ms ease 200ms forwards;
    }
    @keyframes draw {
      to { stroke-dashoffset: 0; }
    }

    #signup-success h4 {
      margin: 8px 0 4px;
      font-size: 1.2rem;
      letter-spacing: .3px;
    }
    #signup-success p {
      margin: 0 0 6px;
      color: var(--muted);
      font-size: .95rem;
    }

    /* Confetti bits */
    .confetti {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .confetti span {
      position: absolute;
      top: 20%;
      left: 50%;
      width: 8px; height: 14px;
      background: white;
      border-radius: 2px;
      opacity: 0;
      transform: translate(-50%, -50%) rotate(0deg);
      animation: confetti-fall 2.8s ease-in forwards;
    }
    @keyframes confetti-fall {
      0% { opacity: 0; transform: translate(-50%, -50%) rotate(0deg) scale(1); }
      10% { opacity: 1; }
      100% { opacity: 0; transform: translate(var(--x, 0), var(--y, 120px)) rotate(260deg) scale(1); }
    }
    /* color & position variety */
    .confetti span:nth-child(3n) { background: #ffd166; }
    .confetti span:nth-child(3n+1) { background: #ef476f; }
    .confetti span:nth-child(3n+2) { background: #06d6a0; }
    /* floating sparkles (gentle, infinite) */
    .sparkles {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    .sparkles i {
      position: absolute;
      width: 6px; height: 6px;
      background: radial-gradient(circle, #fff 0, #fff6 60%, transparent 70%);
      border-radius: 999px;
      animation: float 4.5s ease-in-out infinite;
      opacity: .8;
    }
    @keyframes float {
      0% { transform: translateY(0) scale(1); opacity: .8; }
      50% { transform: translateY(-12px) scale(1.05); opacity: 1; }
      100% { transform: translateY(0) scale(1); opacity: .8; }
    }

    @media (max-width: 600px) {
      .logo img { width: 300px; }
      .subtitle { font-size: 1rem; }
      .countdown { font-size: 1rem; }
      .verse { font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <div class="logo">
    <img src="Templiacrop.png" alt="Templia Logo" />
  </div>

  <h2 class="subtitle">Launching soon on your favorite app store!</h2>
  <div class="countdown" id="countdown"></div>

  <!-- Email Signup -->
  <section class="signup" aria-labelledby="signup-title">
    <h3 id="signup-title">Get notified when we launch</h3>
    <p class="hint">No spam. Unsubscribe anytime.</p>

    <form id="email-form" novalidate>
      <input
        id="email-input"
        name="email"
        type="email"
        inputmode="email"
        autocomplete="email"
        placeholder="Enter your email"
        required
        aria-label="Email address"
      />
      <button id="email-submit" type="submit">Notify me</button>

      <!-- Consent checkbox (recommended for compliance) -->
      <div class="consent">
        <input id="consent" type="checkbox" required />
        <label for="consent">I agree to receive emails from Templia.</label>
      </div>

      <!-- Honeypot -->
      <input class="hiddenpot" type="text" id="company" name="company" tabindex="-1" autocomplete="off" />
    </form>

    <div id="message" class="msg" role="status" aria-live="polite"></div>

    <!-- Success Animation Panel (stays visible until refresh) -->
    <div id="signup-success">
      <div class="success-card">
        <div class="burst"></div>
        <div class="seal">
          <svg class="checkmark" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M5 13l4 4 10-10"></path>
          </svg>
        </div>
        <h4>You're in! üíå</h4>
        <p>We‚Äôll email you when we launch.</p>

        <!-- One-shot confetti burst -->
        <div class="confetti" aria-hidden="true">
          <!-- 18 bits with varied offsets -->
          <span style="--x:-160px; --y:180px; animation-delay:.0s"></span>
          <span style="--x:-120px; --y:170px; animation-delay:.05s"></span>
          <span style="--x:-80px;  --y:160px; animation-delay:.1s"></span>
          <span style="--x:-40px;  --y:170px; animation-delay:.15s"></span>
          <span style="--x:0px;    --y:180px; animation-delay:.2s"></span>
          <span style="--x:40px;   --y:165px; animation-delay:.25s"></span>
          <span style="--x:80px;   --y:175px; animation-delay:.3s"></span>
          <span style="--x:120px;  --y:160px; animation-delay:.35s"></span>
          <span style="--x:160px;  --y:170px; animation-delay:.4s"></span>
          <span style="--x:-150px; --y:210px; animation-delay:.45s"></span>
          <span style="--x:-90px;  --y:200px; animation-delay:.5s"></span>
          <span style="--x:-30px;  --y:205px; animation-delay:.55s"></span>
          <span style="--x:30px;   --y:210px; animation-delay:.6s"></span>
          <span style="--x:90px;   --y:200px; animation-delay:.65s"></span>
          <span style="--x:150px;  --y:205px; animation-delay:.7s"></span>
          <span style="--x:-60px;  --y:190px; animation-delay:.75s"></span>
          <span style="--x:60px;   --y:195px; animation-delay:.8s"></span>
          <span style="--x:0px;    --y:205px; animation-delay:.85s"></span>
        </div>

        <!-- Gentle sparkles that keep looping -->
        <div class="sparkles" aria-hidden="true">
          <i style="top:14%; left:22%; animation-delay:.2s"></i>
          <i style="top:22%; left:78%; animation-delay:.6s"></i>
          <i style="top:32%; left:12%; animation-delay:1s"></i>
          <i style="top:38%; left:88%; animation-delay:1.4s"></i>
          <i style="top:10%; left:50%; animation-delay:.9s"></i>
          <i style="top:28%; left:35%; animation-delay:1.2s"></i>
          <i style="top:28%; left:65%; animation-delay:.3s"></i>
        </div>
      </div>
    </div>
  </section>

  <div class="verse">
    <em>‚ÄúDo you not know that your bodies are temples of the Holy Spirit, who is in you, whom you have received from God? You are not your own;‚Äù</em><br />
    <strong>1 Corinthians 6:19</strong>
  </div>

  <!-- Supabase JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    /* ---------- Countdown ---------- */
    const countdown = document.getElementById("countdown");
    const launchDate = new Date("Dec 7, 2025 00:00:00").getTime();
    const timer = setInterval(function () {
      const now = new Date().getTime();
      const distance = launchDate - now;
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);
      countdown.textContent = `${days}:${hours}:${minutes}:${seconds}`;
      if (distance < 0) { clearInterval(timer); countdown.textContent = "We‚Äôve Launched!"; }
    }, 1000);

    /* ---------- Email Signup (Supabase) ---------- */
    const SUPABASE_URL = "https://YOUR-PROJECT-REF.supabase.co";
    const SUPABASE_ANON_KEY = "YOUR-ANON-PUBLIC-KEY";

    const sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const form = document.getElementById('email-form');
    const emailInput = document.getElementById('email-input');
    const submitBtn = document.getElementById('email-submit');
    const msg = document.getElementById('message');
    const consent = document.getElementById('consent');
    const honeypot = document.getElementById('company');

    const successPanel = document.getElementById('signup-success');
    const hint = document.querySelector('.signup .hint');

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;

    function setMessage(text, isError = false) {
      msg.textContent = text;
      msg.className = 'msg ' + (isError ? 'err' : 'ok');
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = '';
      msg.className = 'msg';

      if (honeypot.value) return; // bot check

      const email = (emailInput.value || '').trim().toLowerCase();
      if (!emailRegex.test(email)) {
        setMessage('Please enter a valid email address.', true);
        return;
      }
      if (!consent.checked) {
        setMessage('Please agree to receive emails from Templia.', true);
        return;
      }

      submitBtn.disabled = true;

      try {
        const { error } = await sb.from('newsletter_subscribers').insert({
          email,
          source: 'coming_soon',
          consent: true
        });

        if (error) {
          if (error.code === '23505') {
            // already subscribed: still show the same celebration (nice UX)
            revealSuccess();
          } else {
            setMessage('Something went wrong. Please try again in a moment.', true);
            console.error(error);
          }
        } else {
          setMessage('Thanks! You‚Äôre on the list üéâ');
          revealSuccess();
        }
      } catch (err) {
        console.error(err);
        setMessage('Network error. Please try again.', true);
      } finally {
        submitBtn.disabled = false;
      }
    });

    // Show success animation, hide form; stays until refresh
    function revealSuccess() {
      // Hide form + hint + inline message to make room for the animation
      form.classList.add('hidden');
      if (hint) hint.classList.add('hidden');
      msg.classList.add('hidden');

      // Trigger confetti once (CSS); keep sparkles looping
      successPanel.classList.add('show');
      // no timeout -> remains visible until user refreshes
    }
  </script>
</body>
</html>
