import React, { useEffect, useRef, useState } from 'react';
import { Heart, BookOpen, PenTool, Users, Sparkles, Shield, TrendingUp, ArrowRight } from 'lucide-react';

interface LandingPageProps {
  onGetStarted: () => void;
}

const LandingPage: React.FC<LandingPageProps> = ({ onGetStarted }) => {
  const [mounted, setMounted] = useState(false);
  const videoRef = useRef<HTMLVideoElement>(null);
  const featuresRef = useRef<HTMLElement>(null);
  const octaviaRef = useRef<HTMLElement>(null);
  const ctaRef = useRef<HTMLElement>(null);

  useEffect(() => {
    const t = setTimeout(() => setMounted(true), 30);
    return () => clearTimeout(t);
  }, []);

  useEffect(() => {
    const playVideo = async () => {
      if (videoRef.current) {
        try {
          await videoRef.current.play();
        } catch (e) {
          console.log('Video autoplay failed:', e);
        }
      }
    };
    playVideo();
  }, []);

  useEffect(() => {
    const observerOptions = {
      root: null,
      rootMargin: '0px',
      threshold: 0.1
    };

    const observerCallback = (entries: IntersectionObserverEntry[]) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('scroll-visible');
        }
      });
    };

    const observer = new IntersectionObserver(observerCallback, observerOptions);

    if (featuresRef.current) observer.observe(featuresRef.current);
    if (octaviaRef.current) observer.observe(octaviaRef.current);
    if (ctaRef.current) observer.observe(ctaRef.current);

    return () => {
      observer.disconnect();
    };
  }, []);

  return (
    <div className="relative min-h-screen bg-black font-sans overflow-hidden">
      <video
        ref={videoRef}
        autoPlay
        loop
        muted
        playsInline
        className="fixed inset-0 w-full h-full object-cover -z-10"
      >
        <source src="/Templia login screen video (1)_compressed copy.mp4" type="video/mp4" />
      </video>

      <div className={`fixed inset-0 bg-black/60 -z-[9] ${mounted ? 'veil-fade' : 'veil-opaque'}`} />

      <div className={`relative z-10 ${mounted ? 'content-fade-in' : 'opacity-0'}`}>
        <nav className="flex items-center justify-between px-6 md:px-12 py-6">
          <div className="flex items-center gap-3">
            <img src="/Templiacrop.png" alt="Templia" className="h-12 w-auto drop-shadow-lg" />
            <span className="text-white text-xl font-semibold hidden sm:inline"></span>
          </div>
          <button
            onClick={onGetStarted}
            className="px-6 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-semibold shadow-lg hover:shadow-xl transform hover:scale-105"
          >
            Sign In
          </button>
        </nav>

        <section className="max-w-6xl mx-auto px-6 md:px-12 pt-12 md:pt-20 pb-16 text-center">
          <div className="hero-content">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-purple-600/20 border border-purple-400/30 mb-6 backdrop-blur-sm">
              <Sparkles className="w-4 h-4 text-purple-300" />
              <span className="text-purple-200 text-sm font-medium">Nurture your love for God</span>
            </div>

            <h1 className="text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight">
              Your Daily Journey
              <br />
              <span className="text-gradient">To Spiritual Growth</span>
            </h1>

            <p className="text-lg md:text-xl text-gray-300 max-w-3xl mx-auto mb-10 leading-relaxed">
              Templia helps you build meaningful daily habits through journaling, Bible study,
              community connection, and personalized spiritual activities. Track your progress,
              stay consistent, and grow closer to God every day.
            </p>

            <button
              onClick={onGetStarted}
              className="group inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all font-semibold text-lg shadow-2xl hover:shadow-purple-500/50 transform hover:scale-105"
            >
              Start Now
              <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
            </button>
          </div>
        </section>

        <section ref={featuresRef} className="scroll-fade max-w-6xl mx-auto px-6 md:px-12 py-16">
          <h2 className="text-3xl md:text-4xl font-bold text-white text-center mb-12">
            Everything You Need to <span className="text-gradient">Grow Spiritually</span>
          </h2>

          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16">
            <FeatureCard
              icon={<PenTool className="w-8 h-8" />}
              title="Daily Journaling"
              description="Reflect on your thoughts and prayers with guided prompts. Track your spiritual journey and see how far you've come."
            />
            <FeatureCard
              icon={<BookOpen className="w-8 h-8" />}
              title="Bible Study & Chat"
              description="Explore scripture with our AI-powered Bible chat feature. Get insights, context, and answers to deepen your understanding."
            />
            <FeatureCard
              icon={<Heart className="w-8 h-8" />}
              title="Self-Care Activities"
              description="Choose from curated activities designed to nurture your mind, body, and spirit. Build healthy daily habits."
            />
            <FeatureCard
              icon={<Users className="w-8 h-8" />}
              title="Koinonia Community"
              description="Connect with other believers, share experiences, and grow together in faith through our supportive community."
            />
            <FeatureCard
              icon={<TrendingUp className="w-8 h-8" />}
              title="Streak Tracking"
              description="Stay motivated with daily streaks. Build consistency and watch your spiritual discipline grow stronger each day."
            />
            <FeatureCard
              icon={<Shield className="w-8 h-8" />}
              title="Devotionals & Journal Prompts"
              description="Read thought-provoking devotionals backed by scripture, coupled with Christian affrimations, bible verses and entry engaging journal prompts."
            />
          </div>
        </section>

        <section ref={octaviaRef} className="scroll-fade max-w-4xl mx-auto px-6 md:px-12 py-16">
          <div className="glass-card rounded-3xl p-8 md:p-12 border border-white/20 shadow-2xl">
            <div className="flex flex-col md:flex-row items-center gap-8">
              <div className="flex-shrink-0">
                <div className="w-32 h-32 md:w-40 md:h-40 rounded-full bg-gradient-to-br from-purple-400 to-blue-500 p-1 shadow-xl">
                  <img
                    src="/img_5997.jpeg"
                    alt="Octavia, Founder of Templia"
                    className="w-full h-full rounded-full object-cover"
                  />
                </div>
              </div>

              <div className="flex-1 text-center md:text-left">
                <h2 className="text-3xl md:text-4xl font-bold text-white mb-3">Meet Octavia</h2>
                <p className="text-purple-300 text-lg mb-4 font-medium">Founder of Templia</p>
                <p className="text-gray-300 leading-relaxed mb-4">
                  After completing an Esther Fast in 2025, Octavia was blessed with inspiration from God to build a platform that combines self-care with scripture. In obedience, Octavia created Templia to assist others in growing their faith
                  and love for God through practical yet entertaining methods. 
                  
                <p className="text-gray-300 leading-relaxed italic border-l-4 border-purple-400 pl-4 my-4">
                  "Growing up, I've always been taught your mental and physical health are just as important as your spiritual health."</p>
                </p>
                
                <p className="text-gray-300 leading-relaxed">
                  With Templia, people across the world can now engage in care that nurtures their relationship with God, their body, their mind and their community. 
                </p>

                <p className="text-gray-300 leading-relaxed">
                  Her vision is to create a welcoming space where anyone can nurture their
                  relationship with God through daily habits, community support, and personal reflection.
                </p>
              </div>
            </div>
          </div>
        </section>

        <section ref={ctaRef} className="scroll-fade max-w-4xl mx-auto px-6 md:px-12 py-16 text-center">
          <h2 className="text-3xl md:text-4xl font-bold text-white mb-6">
            Ready to Begin Your Journey?
          </h2>
          <p className="text-lg text-gray-300 mb-10 max-w-2xl mx-auto">
            Join thousands of women who are growing spiritually, one day at a time.
          </p>
          <button
            onClick={onGetStarted}
            className="group inline-flex items-center gap-2 px-10 py-5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all font-semibold text-xl shadow-2xl hover:shadow-purple-500/50 transform hover:scale-105"
          >
            Start Now
            <ArrowRight className="w-6 h-6 group-hover:translate-x-1 transition-transform" />
          </button>
        </section>

        <footer className="border-t border-white/10 mt-16 py-8">
          <div className="max-w-6xl mx-auto px-6 md:px-12">
            <div className="flex flex-col md:flex-row items-center justify-between gap-4">
              <div className="flex items-center gap-3">
                <img src="/Templiacrop.png" alt="Templia" className="h-8 w-auto" />
                <span className="text-gray-400 text-sm">Â© 2024 Templia. All rights reserved.</span>
              </div>
              <p className="text-gray-400 text-sm italic">
                "She is clothed with strength and dignity" - Proverbs 31:25
              </p>
            </div>
          </div>
        </footer>
      </div>

      <StyleBlock />
    </div>
  );
};

interface FeatureCardProps {
  icon: React.ReactNode;
  title: string;
  description: string;
}

const FeatureCard: React.FC<FeatureCardProps> = ({ icon, title, description }) => {
  return (
    <div className="group glass-card rounded-2xl p-6 border border-white/20 hover:border-purple-400/40 transition-all hover-lift shadow-lg">
      <div className="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center mb-4 text-white group-hover:scale-110 transition-transform shadow-lg">
        {icon}
      </div>
      <h3 className="text-xl font-bold text-white mb-2">{title}</h3>
      <p className="text-gray-300 leading-relaxed">{description}</p>
    </div>
  );
};

const StyleBlock = () => (
  <style>{`
    .veil-opaque { opacity: 1; }
    .veil-fade { animation: veilFade 1s ease-out forwards; }
    @keyframes veilFade { 0% { opacity: 1; } 100% { opacity: .6; } }

    .content-fade-in {
      animation: contentFadeIn 1s ease-out both;
    }
    @keyframes contentFadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .hero-content {
      animation: heroBloom 1.2s cubic-bezier(.2,.7,.2,1) both;
    }
    @keyframes heroBloom {
      0% { opacity: 0; transform: translateY(40px) scale(.95); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    .scroll-fade {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .scroll-fade.scroll-visible {
      opacity: 1;
      transform: translateY(0);
    }

    .text-gradient {
      background: linear-gradient(135deg, #93c5fd 0%, #c4b5fd 50%, #d8b4fe 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientShift 8s ease-in-out infinite;
      background-size: 200% 200%;
    }
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .glass-card {
      background: rgba(10, 10, 15, 0.3);
      backdrop-filter: blur(20px) saturate(150%);
      -webkit-backdrop-filter: blur(20px) saturate(150%);
    }

    .hover-lift {
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }
    .hover-lift:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(124, 58, 237, 0.3);
    }

    @media (prefers-reduced-motion: reduce) {
      .veil-fade,
      .content-fade-in,
      .hero-content,
      .text-gradient,
      .hover-lift,
      .scroll-fade {
        animation: none !important;
        transition: none !important;
        opacity: 1 !important;
        transform: none !important;
      }
    }
  `}</style>
);

export default LandingPage;
